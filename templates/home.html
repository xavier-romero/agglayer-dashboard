{% extends "base.html" %}

{% block title %}AggLayer Dashboard - Kurtosis{% endblock %}

{% block content %}
<h2>Kurtosis Environment</h2>

<div class="card">
    {% if summary.isConnected %}
    <p class="status-connected">‚úÖ Connected to RPC</p>
    {% else %}
    <p class="status-error">‚ùå RPC Connection Error</p>
    {% endif %}
    
    {% if summary.error %}
    <p class="status-error">Error: {{ summary.error }}</p>
    {% else %}
    <table class="detail-table">
        <tr>
            <th>RPC URL</th>
            <td><code>{{ summary.rpcURL }}</code></td>
        </tr>
        <tr>
            <th>Rollup Manager</th>
            <td><code>{{ summary.rollupManagerAddress }}</code></td>
        </tr>
        {% if summary.aggLayerURL %}
        <tr>
            <th>AggLayer URL</th>
            <td><code>{{ summary.aggLayerURL }}</code></td>
        </tr>
        {% endif %}
        <tr>
            <th>Total Rollups</th>
            <td>{{ summary.rollupCount or 0 }}</td>
        </tr>
    </table>
    {% endif %}
</div>

{% if not summary.error %}
<h2>Active Network Counts</h2>

<div class="stats">
    <div class="stat-card">
        <div class="stat-number">{{ summary.rollupCount or 0 }}</div>
        <div class="stat-label">Total Rollups</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ summary.activeCounts.zkEVM or 0 }}</div>
        <div class="stat-label">Active zkEVM</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ summary.activeCounts.PP or 0 }}</div>
        <div class="stat-label">Active PP</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ summary.activeCounts.ALGateway or 0 }}</div>
        <div class="stat-label">Active ALGateway</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ summary.activeCounts.Validium or 0 }}</div>
        <div class="stat-label">Active Validium</div>
    </div>
</div>

<div style="margin-top: 30px; text-align: center;">
    <a href="/rollups" style="display: inline-block; padding: 12px 24px; background-color: #007bff; color: white; text-decoration: none; border-radius: 6px; font-weight: bold;">
        üîç Explore All Rollups
    </a>
</div>

{% if summary.networkAddresses %}
<div class="card">
    <h2>Network Contract Addresses</h2>
    <table class="detail-table">
        <tr>
            <th>Rollup Manager</th>
            <td><code>{{ summary.networkAddresses.rollupManagerAddress }}</code></td>
        </tr>
        <tr>
            <th>Bridge Contract</th>
            <td><code>{{ summary.networkAddresses.bridgeAddress }}</code></td>
        </tr>
        <tr>
            <th>Global Exit Root Manager</th>
            <td><code>{{ summary.networkAddresses.globalExitRootManager }}</code></td>
        </tr>
        <tr>
            <th>POL Token</th>
            <td><code>{{ summary.networkAddresses.polAddress }}</code></td>
        </tr>
        {% if summary.networkAddresses.aggLayerGatewayAddress %}
        <tr>
            <th>AggLayer Gateway</th>
            <td><code>{{ summary.networkAddresses.aggLayerGatewayAddress }}</code></td>
        </tr>
        {% endif %}
    </table>
</div>
{% endif %}
{% endif %}
{% endblock %}